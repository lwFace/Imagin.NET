<UserControl x:Class="Imagin.Common.Controls.PropertyView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Imagin.Common.Controls"
    xmlns:Collections="clr-namespace:System.Collections;assembly=mscorlib"
    xmlns:Common="clr-namespace:Imagin.Common;assembly=Imagin.Common"
    xmlns:Converters="clr-namespace:Imagin.Common.Converters"
    xmlns:_Converters="clr-namespace:Imagin.Common.Globalization.Converters"
    xmlns:Data="clr-namespace:Imagin.Common.Data"
    xmlns:Drawing="clr-namespace:System.Drawing;assembly=System.Drawing"
    xmlns:Input="clr-namespace:System.Windows.Input;assembly=System"
    xmlns:Linq="clr-namespace:Imagin.Common.Linq"
    xmlns:Markup="clr-namespace:Imagin.Common.Markup"
    xmlns:Math="clr-namespace:Imagin.Common.Math;assembly=Imagin.Common"
    xmlns:Media="clr-namespace:System.Windows.Media;assembly=PresentationCore"
    xmlns:_Media="clr-namespace:Imagin.Common.Media;assembly=Imagin.Common"
    xmlns:Net="clr-namespace:System.Net;assembly=System"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:_System="clr-namespace:System;assembly=System"
    xmlns:Windows="clr-namespace:System.Windows;assembly=PresentationCore">
    <UserControl.Resources>
        <Data:Reference x:Key="PropertyView" Data="{Data:Ancestor {x:Type local:PropertyView}}"/>
        
        <Converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <Converters:ByteToDoubleConverter x:Key="ByteToDoubleConverter"/>
        <Converters:ColorToColorConverter x:Key="ColorToColorConverter"/>
        <Converters:ColorToHexadecimalConverter x:Key="ColorToHexadecimalConverter"/>
        <Converters:DecimalToDoubleConverter x:Key="DecimalToDoubleConverter"/>
        <Converters:DisplayNameConverter x:Key="DisplayNameConverter"/>
        <Converters:FileNameConverter x:Key="FileNameConverter"/>
        <Converters:FileSizeMultiConverter x:Key="FileSizeMultiConverter"/>
        <Converters:GuidToStringConverter x:Key="StringToGuidConverter"/>
        <Converters:HexadecimalToColorConverter x:Key="HexadecimalToColorConverter"/>
        <Converters:HexadecimalToStringConverter x:Key="HexadecimalToStringConverter"/>
        <Converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        <Converters:Int16ToDoubleConverter x:Key="Int16ToDoubleConverter"/>
        <Converters:Int32ColorToHexadecimalConverter x:Key="Int32ColorToHexadecimalConverter"/>
        <Converters:Int32ToDoubleConverter x:Key="Int32ToDoubleConverter"/>
        <Converters:Int64ToDoubleConverter x:Key="Int64ToDoubleConverter"/>
        <Converters:NullConverter x:Key="NullConverter"/>
        <Converters:ObjectToDoubleConverter x:Key="ObjectToDoubleConverter"/>
        <Converters:PathCollectionConverter x:Key="PathCollectionConverter"/>
        <Converters:RelativeTimeConverter x:Key="RelativeTimeConverter"/>
        <Converters:SingleToDoubleConverter x:Key="SingleToDoubleConverter"/>
        <Converters:SolidColorBrushToHexadecimalConverter x:Key="SolidColorBrushToHexadecimalConverter"/>
        <Converters:StringCollectionConverter x:Key="StringCollectionConverter"/>
        <Converters:ToStringConverter x:Key="ToStringConverter"/>
        <Converters:UDoubleToDoubleConverter x:Key="UDoubleToDoubleConverter"/>
        <Converters:UInt16ToDoubleConverter x:Key="UInt16ToDoubleConverter"/>
        <Converters:UInt32ToDoubleConverter x:Key="UInt32ToDoubleConverter"/>
        <Converters:UInt64ToDoubleConverter x:Key="UInt64ToDoubleConverter"/>

        <_Converters:TranslateConverter x:Key="TranslateConverter"/>
    </UserControl.Resources>
    <ContentControl DataContext="{Data:Ancestor {x:Type local:PropertyView}}" Content="{Binding Property}">
        <ContentControl.ContentTemplateSelector>
            <local:PropertyTemplateSelector>
                <local:PropertyTemplateSelector.Resources>
                    <ResourceDictionary>
                        <DataTemplate x:Key="{x:Type System:Array}">
                            <ItemsControl ItemsSource="{Binding Value}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock 
                                            Margin="0,0,0,5"
                                            Text="{Binding}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Boolean}">
                            <CheckBox x:Name="CheckBox"
                                HorizontalAlignment="Left" 
                                IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                Margin="0,5"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="CheckBox" Property="IsChecked" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="CheckBox" Property="IsChecked" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="CheckBox" Property="IsChecked" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="CheckBox" Property="IsChecked" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Byte}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:ByteUpDown x:Name="ByteUpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource ByteToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource ByteToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource ByteToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource ByteToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:ByteUpDown x:Name="ByteUpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="ByteUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Common:CardinalDirection}">
                            <local:DirectionPad
                                Direction="{Binding Value, Mode=TwoWay}"
                                Height="180"
                                Width="180"/>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Drawing:Color}">
                            <Grid
                                Linq:GridExtensions.Columns="Auto,Auto,*"
                                Linq:PanelExtensions.Spacing="0,0,5,0"
                                Linq:PanelExtensions.SpacingExcept="Last">
                                <local:ColorChip x:Name="ColorChip"
                                    Grid.Column="0"
                                    Height="25" 
                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                    Width="25"/>
                                <TextBlock 
                                    Grid.Column="1"
                                    Text="#"/>
                                <local:AlphaNumericBox
                                    Grid.Column="1"  
                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                    MaxLength="8"
                                    Text="{Binding Value, Mode=TwoWay, Converter={StaticResource Int32ColorToHexadecimalConverter}, UpdateSourceTrigger=LostFocus}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Media:Color}">
                            <Grid
                                Linq:GridExtensions.Columns="Auto,Auto,*"
                                Linq:PanelExtensions.Spacing="0,0,5,0"
                                Linq:PanelExtensions.SpacingExcept="Last">
                                <local:ColorChip x:Name="ColorChip"
                                    Grid.Column="0"
                                    Height="25" 
                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                    Width="25"/>
                                <TextBlock 
                                    Grid.Column="1"
                                    Text="#"/>
                                <local:AlphaNumericBox
                                    Grid.Column="2"  
                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                    MaxLength="8"
                                    Text="{Binding Value, Mode=TwoWay, Converter={StaticResource ColorToHexadecimalConverter}, UpdateSourceTrigger=LostFocus}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:DateTime}">
                            <ContentControl 
                                x:Name="PART_Content"
                                Content="{Binding Mode=OneWay}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsReadOnly}" Value="False">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:DateTimeUpDown x:Name="DateTimeUpDown"
                                                                HorizontalAlignment="Stretch"
                                                                Maximum="{Binding Maximum}"
                                                                Minimum="{Binding Minimum}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="DateTimeUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="DateTimeUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="DateTimeUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="DateTimeUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding IsReadOnly}" Value="True"/>
                                                    <Condition Binding="{Binding Format}" Value="Default"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <TextBlock
                                                                Margin="0,5"
                                                                Text="{Binding Value, Mode=OneWay}"
                                                                ToolTip="{Binding Text, Mode=OneWay, RelativeSource={RelativeSource Self}}"/>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding IsReadOnly}" Value="True"/>
                                                    <Condition Binding="{Binding Format}" Value="Relative"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <TextBlock
                                                                Margin="0,5"
                                                                Text="{Binding Value, Converter={StaticResource RelativeTimeConverter}, Mode=OneWay}"
                                                                TextTrimming="CharacterEllipsis"
                                                                ToolTip="{Binding Text, Mode=OneWay, RelativeSource={RelativeSource Self}}"/>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Decimal}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:DecimalUpDown x:Name="DecimalUpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource DecimalToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource DecimalToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource DecimalToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource DecimalToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:DecimalUpDown x:Name="DecimalUpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="DecimalUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Double}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Angle">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:AnglePicker 
                                                                Degrees="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                HorizontalAlignment="Left"
                                                                IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                VerticalAlignment="Center"/>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum}"
                                                                    Minimum="{Binding Minimum}"
                                                                    TickFrequency="{Binding Increment, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:DoubleUpDown x:Name="DoubleUpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:DoubleUpDown x:Name="DoubleUpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="DoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Enum}">
                            <ContentControl x:Name="PART_Content">
                                <ComboBox
                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                    ItemsSource="{Data:EnumerateBinding Value}" 
                                    VirtualizingPanel.IsVirtualizing="True" 
                                    VirtualizingPanel.VirtualizationMode="Recycling">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock 
                                                Text="{Binding Converter={StaticResource DisplayNameConverter}, Mode=OneWay}"
                                                TextTrimming="CharacterEllipsis"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                    <ComboBox.Style>
                                        <Style TargetType="{x:Type ComboBox}" BasedOn="{StaticResource {x:Type ComboBox}}">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                    <Setter Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                    <Setter Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                    <Setter Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                    <Setter Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ComboBox.Style>
                                </ComboBox>
                            </ContentControl>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Format}" Value="Flags">
                                    <Setter TargetName="PART_Content" Property="Content">
                                        <Setter.Value>
                                            <local:FlagCheckView
                                                IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                Margin="0,10,0,0">
                                                <local:FlagCheckView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel/>
                                                    </ItemsPanelTemplate>
                                                </local:FlagCheckView.ItemsPanel>
                                                <local:FlagCheckView.ItemTemplate>
                                                    <DataTemplate>
                                                        <CheckBox
                                                            IsChecked="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                            Margin="0,0,0,10"
                                                            ToolTip="{Binding Value, Converter={StaticResource DisplayNameConverter}, Mode=OneWay}">
                                                            <CheckBox.Content>
                                                                <TextBlock 
                                                                    Text="{Binding Value, Converter={StaticResource DisplayNameConverter}, Mode=OneWay}"
                                                                    TextTrimming="CharacterEllipsis"/>
                                                            </CheckBox.Content>
                                                        </CheckBox>
                                                    </DataTemplate>
                                                </local:FlagCheckView.ItemTemplate>
                                                <local:FlagCheckView.Style>
                                                    <Style TargetType="{x:Type local:FlagCheckView}" BasedOn="{StaticResource {x:Type local:FlagCheckView}}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                <Setter Property="Flags" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                <Setter Property="Flags" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                <Setter Property="Flags" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                <Setter Property="Flags" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </local:FlagCheckView.Style>
                                            </local:FlagCheckView>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding IsReadOnly}" Value="True"/>
                                        <Condition Binding="{Binding Format}" Value="Default"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter TargetName="PART_Content" Property="Content">
                                        <Setter.Value>
                                            <ContentControl Content="{Binding .}">
                                                <ContentControl.ContentTemplate>
                                                    <DataTemplate>
                                                        <TextBlock 
                                                            x:Name="PART_TextBox"
                                                            Margin="0,5"
                                                            TextTrimming="CharacterEllipsis"
                                                            ToolTip="{Binding Text, RelativeSource={RelativeSource Self}}"/>
                                                        <DataTemplate.Triggers>
                                                            <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                            <Setter TargetName="PART_TextBox" Property="Text" Value="(multiple values)"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                            <Setter TargetName="PART_TextBox" Property="Text" Value="{Binding Value, Converter={StaticResource DisplayNameConverter}, Mode=OneWay}"/>
                                                            </DataTrigger>
                                                        </DataTemplate.Triggers>
                                                    </DataTemplate>
                                                </ContentControl.ContentTemplate>
                                            </ContentControl>
                                        </Setter.Value>
                                    </Setter>
                                </MultiDataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Media:FontFamily}">
                            <local:FontFamilyBox x:Name="FontFamilyBox"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="FontFamilyBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="FontFamilyBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="FontFamilyBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="FontFamilyBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Windows:FontStyle}">
                            <local:FontStyleBox x:Name="FontStyleBox"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="FontStyleBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="FontStyleBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="FontStyleBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="FontStyleBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Windows:FontWeight}">
                            <local:FontWeightBox x:Name="FontWeightBox"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="FontWeightBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="FontWeightBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="FontWeightBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="FontWeightBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type _Media:GraphicalUnit}">
                            <local:UnitBox x:Name="UnitBox"
                                Unit="{Binding Format}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="UnitBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="UnitBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="UnitBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="UnitBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Guid}">
                            <local:RegexBox x:Name="RegexBox"
                                HorizontalAlignment="Stretch"
                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}" 
                                Pattern="^([0-9A-Fa-f]{8}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{4}[-][0-9A-Fa-f]{12})$"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="RegexBox" Property="Text" Value="{Binding Value, Converter={StaticResource StringToGuidConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="RegexBox" Property="Text" Value="{Binding Value, Converter={StaticResource StringToGuidConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="RegexBox" Property="Text" Value="{Binding Value, Converter={StaticResource StringToGuidConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="RegexBox" Property="Text" Value="{Binding Value, Converter={StaticResource StringToGuidConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Math:Hexadecimal}">
                            <Grid
                                Linq:GridExtensions.Columns="Auto,Auto,*"
                                Linq:PanelExtensions.Spacing="0,0,5,0"
                                Linq:PanelExtensions.SpacingExcept="Last">
                                <local:ColorChip x:Name="ColorChip"
                                    Grid.Column="0"
                                    Height="25" 
                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                    Width="25"/>
                                <TextBlock 
                                    Grid.Column="1"
                                    Text="#"/>
                                <local:AlphaNumericBox
                                    Grid.Column="2"  
                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                    MaxLength="8"
                                    Text="{Binding Value, Mode=TwoWay, Converter={StaticResource HexadecimalToStringConverter}, UpdateSourceTrigger=LostFocus}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource HexadecimalToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource HexadecimalToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource HexadecimalToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="ColorChip" Property="Color" Value="{Binding Value, Converter={StaticResource HexadecimalToColorConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Input:ICommand}">
                            <Button Command="{Binding Value}">
                                <Button.Content>
                                    <MultiBinding Converter="{StaticResource TranslateConverter}">
                                        <Binding Path="DisplayName"/>
                                        <Markup:Options Path="Language"/>
                                    </MultiBinding>
                                </Button.Content>
                            </Button>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Collections:IEnumerable}">
                            <ItemsControl ItemsSource="{Binding Value, Converter={StaticResource StringCollectionConverter}}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock 
                                            Margin="0,0,0,5"
                                            Text="{Binding Converter={StaticResource ToStringConverter}}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Collections:IList}">
                            <ItemsControl ItemsSource="{Binding Value, Converter={StaticResource StringCollectionConverter}}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock 
                                            Margin="0,0,0,5"
                                            Text="{Binding Converter={StaticResource ToStringConverter}}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Int16}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:Int16UpDown x:Name="Int16UpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:Int16UpDown x:Name="Int16UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Int16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Int32}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:Int32UpDown x:Name="Int32UpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:Int32UpDown x:Name="Int32UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Int32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Math:Int32Pattern}">
                            <local:PatternView
                                BorderThickness="0"
                                CanvasLength="180"
                                DotLength="32"
                                InnerDotLength="24"
                                Pattern="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        </DataTemplate> 
                        <DataTemplate x:Key="{x:Type System:Int64}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Format}" Value="FileSize">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <TextBlock Margin="0,10">
                                                                <TextBlock.Text>
                                                                    <MultiBinding Converter="{StaticResource FileSizeMultiConverter}">
                                                                        <Binding Path="Value"/>
                                                                        <Binding Path="FileSizeFormat"/>
                                                                    </MultiBinding>
                                                                </TextBlock.Text>
                                                            </TextBlock>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Format}" Value="Default"/>
                                                    <Condition Binding="{Binding RangeFormat}" Value="Slider"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:Int64UpDown x:Name="Int64UpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource Int64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Format}" Value="Default"/>
                                                    <Condition Binding="{Binding RangeFormat}" Value="UpDown"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:Int64UpDown x:Name="Int64UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Int64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Media:LinearGradientBrush}">
                            <!--
                            <Common:GradientChip 
                            Height="25"
                            Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                            Width="Auto"/>
                            -->
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Net:NetworkCredential}">
                            <StackPanel IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}">
                                <local:TextBox
                                    Margin="0,0,0,5"
                                    Placeholder="Username"
                                    Text="{Binding Value.UserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                <local:TextBox
                                    MaskCharacters="True"
                                    Placeholder="Password"
                                    ShowToggleButton="True"
                                    Text="{Binding Value.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            </StackPanel>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Object}">
                            <ContentControl
                                Content="{Binding}"
                                ContentStringFormat="{Binding Data.ReferencePropertyStringFormat, Source={StaticResource PropertyView}}"
                                ContentTemplate="{Binding Data.ReferencePropertyTemplate, Source={StaticResource PropertyView}}"
                                ContentTemplateSelector="{Binding Data.ReferencePropertyTemplateSelector, Source={StaticResource PropertyView}}"/>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Media:RadialGradientBrush}">
                            <!--
                            <Common:GradientChip 
                            Height="25"
                            Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                            Width="Auto"/>
                            -->
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Single}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:SingleUpDown x:Name="SingleUpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource SingleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource SingleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource SingleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource SingleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:SingleUpDown x:Name="SingleUpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="SingleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Media:SolidColorBrush}">
                            <DataTemplate.Resources>
                                <Converters:SolidColorBrushToStringConverter x:Key="SolidColorBrushToStringConverter"/>
                            </DataTemplate.Resources>
                            <Grid IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <local:ColorChip x:Name="ColorChip"
                                    Width="25" 
                                    Height="25" 
                                    Margin="0,0,5,0"/>
                                <local:AlphaNumericBox
                                    Grid.Column="1"  
                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                    MaxLength="8"
                                    Text="{Binding Value, Mode=TwoWay, Converter={StaticResource SolidColorBrushToStringConverter}, UpdateSourceTrigger=LostFocus}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="ColorChip" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="ColorChip" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="ColorChip" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="ColorChip" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:String}">
                            <ContentControl 
                                x:Name="PART_Content"
                                Content="{Binding Mode=OneWay}">
                                <ContentControl.ContentTemplate>
                                    <DataTemplate>
                                        <local:TextBox
                                            x:Name="PART_TextBox"
                                            HorizontalAlignment="Stretch"
                                            IsClearEnabled="True"
                                            IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"/>
                                        <DataTemplate.Triggers>
                                            <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                <Setter TargetName="PART_TextBox" Property="Placeholder" Value="(multiple values)"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                <Setter TargetName="PART_TextBox" Property="Placeholder" Value="{Binding LocalizedDisplayName}"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                <Setter TargetName="PART_TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                <Setter TargetName="PART_TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                <Setter TargetName="PART_TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                <Setter TargetName="PART_TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                            </DataTrigger>
                                        </DataTemplate.Triggers>
                                    </DataTemplate>
                                </ContentControl.ContentTemplate>
                            </ContentControl>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="File">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <ComboBox 
                                                    x:Name="PART_ComboBox"
                                                    HorizontalAlignment="Stretch"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                    ItemsSource="{Binding Value, Converter={StaticResource PathCollectionConverter}, Mode=OneTime}"
                                                    SelectedItem="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                    <ComboBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <TextBlock
                                                                Text="{Binding Converter={StaticResource FileNameConverter}, ConverterParameter=0}"/>
                                                        </DataTemplate>
                                                    </ComboBox.ItemTemplate>
                                                </ComboBox>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                        <Setter TargetName="PART_ComboBox" Property="IsEnabled" Value="False"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                        <Setter TargetName="PART_ComboBox" Property="IsEnabled" Value="True"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="FilePath">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:FileBox x:Name="FileBox"
                                                    BrowseMode="OpenFile"
                                                    CanBrowse="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                    CanValidate="True"
                                                    HorizontalAlignment="Stretch"
                                                    IsClearEnabled="True"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                    ValidateHandler="{Binding ValidateHandler}"/>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                        <Setter TargetName="FileBox" Property="Placeholder" Value="(multiple values)"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                        <Setter TargetName="FileBox" Property="Placeholder" Value="{Binding LocalizedDisplayName}"/>
                                                    </DataTrigger>
                                                    <!-- ............................................................................... -->
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="FolderPath">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:FileBox x:Name="FileBox"
                                                    BrowseMode="OpenFolder"
                                                    CanBrowse="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                    CanValidate="True"
                                                    HorizontalAlignment="Stretch"
                                                    IsClearEnabled="True"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                    ValidateHandler="{Binding ValidateHandler}"/>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                        <Setter TargetName="FileBox" Property="Placeholder" Value="(multiple values)"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                        <Setter TargetName="FileBox" Property="Placeholder" Value="{Binding LocalizedDisplayName}"/>
                                                    </DataTrigger>
                                                    <!-- ............................................................................... -->
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                        <Setter TargetName="FileBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="Multiline">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:TextBox x:Name="TextBox"
                                                    AcceptsReturn="True"
                                                    Height="Auto"
                                                    HorizontalAlignment="Stretch"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}" 
                                                    Padding="5,7"
                                                    TextBlock.LineStackingStrategy="BlockLineHeight"
                                                    TextBlock.LineHeight="15"
                                                    VerticalContentAlignment="Top"
                                                    TextWrapping="Wrap"/>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                        <Setter TargetName="TextBox" Property="Placeholder" Value="(multiple values)"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                        <Setter TargetName="TextBox" Property="Placeholder" Value="{Binding LocalizedDisplayName}"/>
                                                    </DataTrigger>
                                                    <!-- ............................................................................... -->
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="Password">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:TextBox x:Name="TextBox"
                                                    MaskCharacters="True"
                                                    IsClearEnabled="True"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                    ShowToggleButton="True"
                                                    HorizontalAlignment="Stretch"/>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                        <Setter TargetName="TextBox" Property="Placeholder" Value="(multiple values)"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsIndeterminate, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                        <Setter TargetName="TextBox" Property="Placeholder" Value="{Binding LocalizedDisplayName}"/>
                                                    </DataTrigger>
                                                    <!-- ............................................................................... -->
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                        <Setter TargetName="TextBox" Property="Text" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Format, UpdateSourceTrigger=PropertyChanged}" Value="Tokens">
                                    <Setter TargetName="PART_Content" Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <local:TokenView x:Name="TokenView"
                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                    HorizontalAlignment="Stretch"
                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                    TokenDelimiter="{Binding StringFormatDelimiter}">
                                                </local:TokenView>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                        <Setter TargetName="TokenView" Property="TokensSource" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                        <Setter TargetName="TokenView" Property="TokensSource" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                        <Setter TargetName="TokenView" Property="TokensSource" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                        <Setter TargetName="TokenView" Property="TokensSource" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Thickness}">
                            <local:ThicknessBox x:Name="ThicknessBox"
                                HorizontalAlignment="Stretch"
                                IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="ThicknessBox" Property="Thickness" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="ThicknessBox" Property="Thickness" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="ThicknessBox" Property="Thickness" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="ThicknessBox" Property="Thickness" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:TimeSpan}">
                            <local:TimeSpanUpDown x:Name="TimeSpanUpDown"
                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, RelativeSource={RelativeSource Self}}"
                                HorizontalAlignment="Stretch"
                                IsReadOnly="{Binding IsReadOnly}"
                                Maximum="{Binding Maximum}"
                                Minimum="{Binding Minimum}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="TimeSpanUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="TimeSpanUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="TimeSpanUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="TimeSpanUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:TimeZoneInfo}">
                            <local:TimeZoneBox x:Name="TimeZoneBox"
                                HorizontalAlignment="Stretch"
                                IsReadOnly="{Binding IsReadOnly}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="TimeZoneBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="TimeZoneBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="TimeZoneBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="TimeZoneBox" Property="SelectedItem" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Type}">
                            <TextBlock
                                Text="{Binding Value.FullName}"/>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type Common:UDouble}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:UDoubleUpDown x:Name="UDoubleUpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UDoubleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UDoubleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UDoubleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UDoubleToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:UDoubleUpDown x:Name="UDoubleUpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="UDoubleUpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:UInt16}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:UInt16UpDown x:Name="UInt16UpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt16ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:UInt16UpDown x:Name="UInt16UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="UInt16UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:UInt32}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="Slider">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:UInt32UpDown x:Name="UInt32UpDown"
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt32ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding RangeFormat}" Value="UpDown">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:UInt32UpDown x:Name="UInt32UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="UInt32UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:UInt64}">
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="ContentControl">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Format}" Value="FileSize">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <TextBlock Margin="0,10">
                                                                <TextBlock.Text>
                                                                    <MultiBinding Converter="{StaticResource FileSizeMultiConverter}">
                                                                        <Binding Path="Value"/>
                                                                        <Binding Path="FileSizeFormat"/>
                                                                    </MultiBinding>
                                                                </TextBlock.Text>
                                                            </TextBlock>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </DataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Format}" Value="Default"/>
                                                    <Condition Binding="{Binding RangeFormat}" Value="Slider"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <Grid Linq:GridExtensions.Columns="60*,40*">
                                                                <Slider x:Name="Slider"
                                                                    Grid.Column="0"
                                                                    HorizontalAlignment="Stretch"
                                                                    IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    Margin="0,5"
                                                                    Maximum="{Binding Maximum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    Minimum="{Binding Minimum, Converter={StaticResource ObjectToDoubleConverter}}"
                                                                    TickFrequency="{Binding Increment, Converter={StaticResource ObjectToDoubleConverter}, Mode=OneWay}"
                                                                    ToolTip="{Binding Value, Mode=OneWay}"
                                                                    VerticalAlignment="Center"/>
                                                                <local:UInt64UpDown x:Name="UInt64UpDown" 
                                                                    Grid.Column="1"
                                                                    CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                    HorizontalAlignment="Stretch"
                                                                    Increment="{Binding Increment, Mode=OneWay}"
                                                                    IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                    Margin="5,0,0,0"
                                                                    Maximum="{Binding Maximum, Mode=OneWay}"
                                                                    Minimum="{Binding Minimum, Mode=OneWay}"
                                                                    Placeholder="{Binding LocalizedDisplayName}"
                                                                    VerticalAlignment="Center"/>
                                                            </Grid>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="Slider" Property="Value" Value="{Binding Value, Converter={StaticResource UInt64ToDoubleConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Format}" Value="Default"/>
                                                    <Condition Binding="{Binding RangeFormat}" Value="UpDown"/>
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <DataTemplate>
                                                            <local:UInt64UpDown x:Name="UInt64UpDown"
                                                                CanUpDown="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                                                HorizontalAlignment="Stretch"
                                                                Increment="{Binding Increment, Mode=OneWay}"
                                                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                                                Maximum="{Binding Maximum, Mode=OneWay}"
                                                                Minimum="{Binding Minimum, Mode=OneWay}"
                                                                Placeholder="{Binding LocalizedDisplayName}"/>
                                                            <DataTemplate.Triggers>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                                                    <Setter TargetName="UInt64UpDown" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                </DataTrigger>
                                                            </DataTemplate.Triggers>
                                                        </DataTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type _System:Uri}">
                            <local:UriBox x:Name="UriBox"
                                HorizontalAlignment="Stretch"
                                IsReadOnly="{Binding IsReadOnly, Mode=OneWay}"
                                Placeholder="{Binding LocalizedDisplayName}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="UriBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="UriBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="UriBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="UriBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                        <DataTemplate x:Key="{x:Type System:Version}">
                            <local:VersionBox x:Name="VersionBox"
                                HorizontalAlignment="Stretch"
                                IsEnabled="{Binding IsReadOnly, Converter={StaticResource InverseBooleanConverter}, Mode=OneWay}"
                                Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Default">
                                    <Setter TargetName="VersionBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Default}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="Explicit">
                                    <Setter TargetName="VersionBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=Explicit}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="LostFocus">
                                    <Setter TargetName="VersionBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding UpdateSourceTrigger}" Value="PropertyChanged">
                                    <Setter TargetName="VersionBox" Property="Value" Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ResourceDictionary>
                </local:PropertyTemplateSelector.Resources>
            </local:PropertyTemplateSelector>
        </ContentControl.ContentTemplateSelector>
    </ContentControl>
</UserControl>